<HTML>
<HEAD>
<TITLE>Upgrading database schema at an existing site</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META NAME="GENERATOR" CONTENT="Solutionsoft WordToWeb">
</HEAD>

<BODY BGCOLOR="#FFFFFF">
<P><CENTER>
<a href="toc.html">TOC</a>&nbsp;|&nbsp;<a href="userguidep22.html">Previous</a>&nbsp;|&nbsp;<a href="userguidep24.html">Next</a>&nbsp;|&nbsp;<a href="http://www.reciprocalnet.org/networkinfo/docs/">Documentation Home</a></CENTER><P>

<A NAME="topofpage"></A>
<P><HR SIZE=2 ALIGN=CENTER WIDTH="100%"></P>
<h2><B><FONT SIZE=+2><FONT COLOR="DDB8FE"><FONT FACE="Arial"><A NAME="T1"><a
name="_Toc187857403">Upgrading database schema at an existing site</a></span></span></A></FONT></FONT></FONT></B></h2>


</div>

<div >

<p class=Existingsitesonly ><v:shape
 id="_x0000_s1069" type="#_x0000_t202" fillcolor="#f90"
 stroked="f">
 <v:textbox inset="0,2.16pt,0,2.16pt"/>
 <w:wrap anchorx="margin"/>
</v:shape>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=72 height=52 bgcolor="#FF9900" >
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div v:shape="_x0000_s1069" 
    class=shape>
    <p class=MsoNormal align=center ><b >EXISTING SITES ONLY</b></p>
    </div>
    </td>
   </tr>
  </table>
   </td>
 </tr>
</table>

This section
applies only to existing Reciprocal Net sites that are upgrading to the newest
release of the Reciprocal Net site software. 
It does not apply to new sites.</p>

<p class=Existingsitesonly >The Reciprocal Net site software needs to be re-bound to the MySQL
database.  The database engine on your
new system does not yet have the same user accounts as were on the old
system.  To remedy this, go to a command
prompt and type:</p>

</div>

<p class=MsoNormal>
<TABLE WIDTH="100%" BGCOLOR="C0C0C0" BORDER=0 CELLPADDING=5><TR><TD>
<blockquote><code>drecipnet
setpasswords
</TD></TR></TABLE>
</code></blockquote></p>

<div >

<p class=Existingsitesonly >.  Enter the database engine’s <B><I>root</B></I> password
(invented earlier in this chapter) when prompted.  The program will exit shortly.</p>

<p class=Existingsitesonly >The next step is to upgrade the database.  This is necessary because your old system’s
database files are in the format expected by site software 0.6.2.  However, the database schema has changed with
this release and thus the Reciprocal Net site software on your new system will
expect a different format.  Go to a
command prompt and type the following:</p>

</div>

<p class=MsoNormal>
<TABLE WIDTH="100%" BGCOLOR="C0C0C0" BORDER=0 CELLPADDING=5><TR><TD>
<blockquote><code>drecipnet update
</TD></TR></TABLE>
</code></blockquote></p>

<div >

<p class=Existingsitesonly >The program may run for several minutes, depending upon the size of
your site’s database, and will display several status messages.  Do not interrupt it.  Eventually a <B><I>Done</B></I> message should appear and
the program will exit.  (If the <B><I>Done</B></I> message
does not appear, this indicates a serious problem at your site that may result
in data loss.  Please do not proceed;
instead, contact Reciprocal Net technical support.)</p>

<p class=Existingsitesonly >An optional next step is to rebuild the indexes in the database.  If your site’s database is up-to-date and in
good health then this step will have no effect. 
However, if there are some database inconsistencies, this step may well
correct them automatically.  At a command
prompt, type:</p>

</div>

<p class=MsoNormal>
<TABLE WIDTH="100%" BGCOLOR="C0C0C0" BORDER=0 CELLPADDING=5><TR><TD>
<blockquote><code>drecipnet
rebuild
</TD></TR></TABLE>
</code></blockquote></p>

<div >

<p class=Existingsitesonly >.  As before, the program may run
for several minutes, depending upon the size of your site’s database, and
eventually should display a <B><I>Done</B></I> message.  If you do not see the <B><I>Done</B></I> message,
please contact Reciprocal Net technical support promptly.</p>

<p class=Existingsitesonly >At this point your new system should be fully equipped to resume
operations on the Reciprocal Net Site Network right where your old system left
off.  Continue on to the next section.</p>

</div>

<div >


<!--W2WBODYEND-->

<P><HR ALIGN=center SIZE=2 WIDTH="100%">
<P><CENTER>
<a href="toc.html">TOC</a>&nbsp;|&nbsp;<a href="userguidep22.html">Previous</a>&nbsp;|&nbsp;<a href="userguidep24.html">Next</a>&nbsp;|&nbsp;<a href="http://www.reciprocalnet.org/networkinfo/docs/">Documentation Home</a></CENTER><P>

</BODY>
</HTML>
