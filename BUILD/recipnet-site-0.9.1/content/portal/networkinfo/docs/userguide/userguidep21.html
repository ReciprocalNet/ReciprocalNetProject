<HTML>
<HEAD>
<TITLE>Restoring data from a backup of an existing site</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<META NAME="GENERATOR" CONTENT="Solutionsoft WordToWeb">
</HEAD>

<BODY BGCOLOR="#FFFFFF">
<P><CENTER>
<a href="toc.html">TOC</a>&nbsp;|&nbsp;<a href="userguidep20.html">Previous</a>&nbsp;|&nbsp;<a href="userguidep22.html">Next</a>&nbsp;|&nbsp;<a href="http://www.reciprocalnet.org/networkinfo/docs/">Documentation Home</a></CENTER><P>

<A NAME="topofpage"></A>
<P><HR SIZE=2 ALIGN=CENTER WIDTH="100%"></P>
<h2><B><FONT SIZE=+2><FONT COLOR="DDB8FE"><FONT FACE="Arial"><A NAME="T1"><a
name="_Toc187857401"></a><a name="_Ref186635813"><A NAME="bk1">Restoring data from a backup of an existing site</a></A></FONT></FONT></FONT></B></h2>


</div>

<div >

<p class=Existingsitesonly ><v:shape
 id="_x0000_s1066" type="#_x0000_t202" fillcolor="#f90" stroked="f">
 <v:textbox inset="0,2.16pt,0,2.16pt"/>
 <w:wrap anchorx="margin"/>
</v:shape>

<table cellpadding=0 cellspacing=0>
 <tr>
  <td width=72 height=52 bgcolor="#FF9900" >
  <table cellpadding=0 cellspacing=0 width="100%">
   <tr>
    <td>
    <div v:shape="_x0000_s1066" 
    class=shape>
    <p class=MsoNormal align=center ><b >EXISTING SITES ONLY</b></p>
    </div>
    </td>
   </tr>
  </table>
   </td>
 </tr>
</table>

This section
applies only to existing Reciprocal Net sites that are upgrading to the newest
release of the Reciprocal Net site software. 
It does not apply to new sites.</p>

<p class=Existingsitesonly >Locate the archive file from your old system created earlier in this
chapter and copy it to your new system. 
A good place to put it is the <B><I>/root/</B></I> directory.  The next step is to deploy the files
contained within the archive to your new system.  Go to a command prompt and type something
like the following:</p>

</div>

<p class=MsoNormal>
<TABLE WIDTH="100%" BGCOLOR="C0C0C0" BORDER=0 CELLPADDING=5><TR><TD>
<blockquote><code>tar
–xzvpPf /root/recipnet-backup-2008-01-08.tar.gz
</TD></TR></TABLE>
</code></blockquote></p>

<div >

<p class=Existingsitesonly >, changing the archive’s path and file name as needed.  The program may take many minutes to finish
running.</p>

<p class=Existingsitesonly >File ownerships and permissions were preserved from your old system to
the best of <B><I>tar’s</B></I>
ability.  If your old system was set up
precisely according to Reciprocal Net recommendations then the file permissions
on your new system should be functional. 
However, some older systems may have been configured with different
permissions on the <B><I>/var/recipnet/data/</B></I>
directory and its contents in an alternate security configuration.  You can ensure that all data files on your
new system are accessible by going to a command prompt and typing the following
two commands:</p>

</div>

<p class=MsoNormal>
<TABLE WIDTH="100%" BGCOLOR="C0C0C0" BORDER=0 CELLPADDING=5><TR><TD>
<blockquote><code>chmod
-R a+r /var/recipnet/data
</TD></TR></TABLE>
</code></blockquote></p>

<p class=MsoNormal>            </p>

<p class=MsoNormal>
<TABLE WIDTH="100%" BGCOLOR="C0C0C0" BORDER=0 CELLPADDING=5><TR><TD>
<blockquote><code>find
/var/recipnet/data -type d –exec chmod a+x {} \;
</TD></TR></TABLE>
</code></blockquote></p>

<div >

<p class=Existingsitesonly >The hard disk will churn for a few minutes as file permissions are
updated.</p>

</div>

<p class=Tipparagraph>TIPè Experienced system administrators may prefer to
utilize an alternate permission structure for the files within <B><I>/var/recipnet/data/</B></I>
and should feel free to do so.  The only
rules are these: the user <B><I>recipnet</B></I>
must have read-write access to <B><I>/var/recipnet/data/</B></I> (including
the contents within it) and the user <B><I>apache</B></I> must have read access to
it.  Additionally, some sites choose to
allow members of the <B><I>users</B></I>
group to manipulate these files directly, but such access is not required by
the Reciprocal Net site software.</p>

<div >

<p class=Existingsitesonly >Next, some of the files that were extracted to your new system were MySQL
database files.  It is necessary to bounce
the <B><I>mysqld</B></I>
daemon in order to activate them.  From
the GNOME desktop, go to the <B><I>System/Administration </B></I>menu and launch
the <B><I>Services</B></I>
program as before.  Highlight <B><I>mysqld</B></I> and
click the <B><I>Restart</B></I>
button.  A success message should appear
shortly.  Click <B><I>OK</B></I>.</p>

</div>

<div >


<!--W2WBODYEND-->

<P><HR ALIGN=center SIZE=2 WIDTH="100%">
<P><CENTER>
<a href="toc.html">TOC</a>&nbsp;|&nbsp;<a href="userguidep20.html">Previous</a>&nbsp;|&nbsp;<a href="userguidep22.html">Next</a>&nbsp;|&nbsp;<a href="http://www.reciprocalnet.org/networkinfo/docs/">Documentation Home</a></CENTER><P>

</BODY>
</HTML>
