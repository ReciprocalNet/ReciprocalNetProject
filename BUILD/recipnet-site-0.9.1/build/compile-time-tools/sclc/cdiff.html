<HTML>
<HEAD>
<TITLE>cdiff - perform a cleardiff which includes lines of surrounding context</TITLE>
</HEAD>

<BODY>

<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#NAME">NAME</A>
	<LI><A HREF="#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="#OPTIONS_AND_ARGUMENTS">OPTIONS AND ARGUMENTS</A>
	<LI><A HREF="#DESCRIPTION">DESCRIPTION</A>
	<LI><A HREF="#EXAMPLES">EXAMPLES</A>
	<LI><A HREF="#SEE_ALSO">SEE ALSO</A>
	<LI><A HREF="#AUTHOR">AUTHOR</A>
	<LI>Back to <A HREF=sclc-cdiff.html>sclc &amp; cdiff download page</A>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="NAME">NAME</A></H1>
<P>
cdiff - perform a cleardiff which includes lines of surrounding context

<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS</A></H1>
<P>
<PRE>
 cdiff [-Help] [-Debug] [-after NUMBER] [-before NUMBER] [-blank_ignore]
       [-fmt FORMAT] [-linenumbers] [-nocontext] [-noheaders] [-noprolog]
       [-pred] [-unlimited] [-tabstop NUMBER] [-output FILE] XPNAME ...
</PRE>
<P>
<HR>
<H1><A NAME="OPTIONS_AND_ARGUMENTS">OPTIONS AND ARGUMENTS</A></H1>
<DL>
<DT><STRONG><A NAME="item__Help">-Help</A></STRONG><DD>
<P>
Print this help message and exit.

<DT><STRONG><A NAME="item__Version">-Version</A></STRONG><DD>
<P>
Print version information and exit

<DT><STRONG><A NAME="item__Debug">-Debug</A></STRONG><DD>
<P>
Enable debugging output.

<DT><STRONG><A NAME="item__after">-after NUMBER</A></STRONG><DD>
<P>
Number of lines of context to show after a difference.

<DT><STRONG><A NAME="item__before">-before NUMBER</A></STRONG><DD>
<P>
Number of lines of context to show before a difference.

<DT><STRONG><A NAME="item__unlimited">-unlimited</A></STRONG><DD>
<P>
Show unlimited lines of context (all common lines).

<DT><STRONG><A NAME="item__blank_ignore">-blank_ignore</A></STRONG><DD>
<P>
Pass the <STRONG>-blank_ignore</STRONG> option to <STRONG>cleardiff(1)</STRONG>.

<DT><STRONG><A NAME="item__linenumbers">-linenumbers</A></STRONG><DD>
<P>
Include line numbers (for each file) in the output.

<DT><STRONG><A NAME="item__reflinenumbers">-reflinenumbers</A></STRONG><DD>
<P>
Include absolute reference line numbers (for each file) in the output.

<DT><STRONG><A NAME="item__pred">-pred</A></STRONG><DD>
<P>
Pass the <STRONG>-pred</STRONG> option to <STRONG>cleardiff(1)</STRONG>.

<DT><STRONG><A NAME="item__nocontext">-nocontext</A></STRONG><DD>
<P>
Don't print lines of context.

<DT><STRONG><A NAME="item__noheaders">-noheaders</A></STRONG><DD>
<P>
Don't include change headers in the output.

<DT><STRONG><A NAME="item__noprolog">-noprolog</A></STRONG><DD>
<P>
Don't print the ``legend'' prolog at the beginning that shows which file
names correspond to which file numbers.

<DT><STRONG><A NAME="item__tabstop">-tabstop NUMBER</A></STRONG><DD>
<P>
If specified, then expand tab into spaces using the given argument as the
tabstop setting (each tab-setting corresponds to the given number of
spaces). If unspecified, no tab-expansion is performed.

<DT><STRONG><A NAME="item__fmt">-fmt FORMAT</A></STRONG><DD>
<P>
Specify output format attributes. Valid <EM>FORMAT</EM> values are:

<DL>
<DT><STRONG><A NAME="item_patch">patch</A></STRONG><DD>
<P>
Specify that output should be in the context-diff format used by Larry
Wall's patch program. Causes all other formats to be ignored (Note:
requires <CODE>diff -C</CODE>).

<DT><STRONG><A NAME="item_deleted">deleted=PREFIX</A></STRONG><DD>
<P>
Specify the prefix for a deleted line (default = ``&lt;'')

<DT><STRONG><A NAME="item_inserted">inserted=PREFIX</A></STRONG><DD>
<P>
Specify the prefix for an inserted line (default = ``&gt;'')

<DT><STRONG><A NAME="item_movedfrom">movedfrom=PREFIX</A></STRONG><DD>
<P>
Specify the prefix for a deleted/moved line (default: same as for <A HREF="#item_deleted">deleted</A>)

<DT><STRONG><A NAME="item_movedto">movedto=PREFIX</A></STRONG><DD>
<P>
Specify the prefix for an inserted/moved line (default: same as for <A HREF="#item_inserted">inserted</A>)

<DT><STRONG><A NAME="item_common">common=PREFIX</A></STRONG><DD>
<P>
Specify the prefix for a line of context that is common to all files
(default = ``'')

<DT><STRONG><A NAME="item_numwidth">numwidth=NUMBER</A></STRONG><DD>
<P>
Specify the width of any line numbers that are to appear in the output (for
use with the <STRONG>-linenumbers</STRONG> and <STRONG>-reflinenumbers</STRONG>
options).  <EM>NUMBER</EM> must be a positive integer (default = 4)

<DT><STRONG><A NAME="item_reverse">reverse</A></STRONG><DD>
<P>
Specify that line numbers should be printed in reverse order (for use with
the <STRONG>-linenumbers</STRONG> option). By default line numbers are printed left-to-right in the order:

<P>
<PRE>        file 1, file 2, ..., file N
</PRE>
<P>
Specifying <A HREF="#item_reverse">reverse</A> causes them to be printed in reverse order as in:

<P>
<PRE>        file N, ..., file 2, file 1
</PRE>
<DT><STRONG><A NAME="item_separator">separator=STRING</A></STRONG><DD>
<P>
Specify the text to separate a deleted/inserted/common prefix from the
actual source (default = ``'')

<DT><STRONG><A NAME="item_lheader">lheader=PREFIX</A></STRONG><DD>
<P>
Specify the prefix (left-header) for header-lines that indicate a change
was made (default = ``-----'')

<DT><STRONG><A NAME="item_rheader">rheader=SUFFIX</A></STRONG><DD>
<P>
Specify the suffix (right-header) for header-lines that indicate a change
was made (default = ``-----'')

<DT><STRONG><A NAME="item_header">header=STRING</A></STRONG><DD>
<P>
Specify the suffix+prefix for header-lines that indicate a change was made

<DT><STRONG><A NAME="item_divider">divider=STRING</A></STRONG><DD>
<P>
Specify the contents of the dividing line that separates a section of
context from the following/preceding section (default =
``*********************************'')

<DT><STRONG><A NAME="item_base">base=PREFIX</A></STRONG><DD>
<P>
Specify the prefix for the name of the base-file in the prologue section
(default = ``&lt;&lt;&lt;'')

<DT><STRONG><A NAME="item_contrib">contrib=PREFIX</A></STRONG><DD>
<P>
Specify the prefix for the name of a contributor-file in the prologue
section (default = ``&gt;&gt;&gt;'')

</DL>
<P>
<EM>FORMAT</EM> keywords may be abbreviated to a unique prefix and are case insensitive.
This option may be specified multiple times.

<DT><STRONG><A NAME="item__output">-output FILE</A></STRONG><DD>
<P>
Redirect output to the named file (should have the same effect as
redirecting STDOUT on the cmdline using ``&gt; <EM>FILE</EM>'').

<DT><STRONG><A NAME="item_XPNAME">XPNAME</A></STRONG><DD>
<P>
Extended pathname to the desired element in your view (the version path may
be abbreviated).

</DL>
<P>
Option names are case insensitive and only a unique prefix is required.

<P>
<HR>
<H1><A NAME="DESCRIPTION">DESCRIPTION</A></H1>
<P>
<STRONG>cdiff</STRONG> will produce a serial-format difference listing with surrounding lines of
context for the named files. A filename may be specified as a
version-extended pathname (abbreviated or otherwise), or simply by a
version selector (in which case the corresponding element is assumed to be
the same as the element associated with the previously specified filename).

<P>
Exit status is 0 if there are no differences to report, 1 if there are, and
2 if an error occurred.

<P>
<HR>
<H1><A NAME="EXAMPLES">EXAMPLES</A></H1>
<P>
You typically give cdiff a single file if you just want to compare against
the predecessor version in ClearCase (the <STRONG>-pred</STRONG> option is the default if only one filename is given):

<P>
<PRE>  $ cdiff dir.c
</PRE>
<P>
<PRE>  ********************************
  &lt;&lt;&lt; file 1: /vobs/myproj/dir.c@@/main/4
  &gt;&gt;&gt; file 2: dir.c
  ********************************
</PRE>
<P>
<PRE>    static      Dta_buf         dtabuf;
    static      Dta_buf         *dtapnt = &amp;dtabuf;
    static      union REGS      reg, nreg;
</PRE>
<P>
<PRE>  -----[after 57 inserted 58-61]-----
  &gt; #if defined(M_I86LM)
  &gt; static      struct SREGS    sreg;
  &gt; #endif
  &gt; 
  -----[end of inserted lines]-----
    DIR *
    opendir(name)
          char  *name;
    {
          struct        stat            statb;
  ********************************
    void
    closedir(dirp)
          DIR   *dirp;
    {
          free_dircontents(dirp-&gt;dd_contents);
  -----[108 changed to 112]-----
  &lt;     free((void *) dirp);
  ----------
  &gt;     free((char *) dirp);
  -----[end of changed lines]-----
    }
</PRE>
<P>
<PRE>    struct direct       *
    readdir(dirp)
          DIR   *dirp;
</PRE>
<P>
You can also specify the <EM>FROM</EM> and <EM>TO</EM> files directly

<P>
<PRE>  $ cdiff dir.c.OLD dir.c
</PRE>
<P>
<PRE>  ********************************
  &lt;&lt;&lt; file 1: dir.c.orig
  &gt;&gt;&gt; file 2: dir.c
  ********************************
</PRE>
<P>
<PRE>    static      Dta_buf         dtabuf;
    static      Dta_buf         *dtapnt = &amp;dtabuf;
    static      union REGS      reg, nreg;
</PRE>
<P>
<PRE>  -----[after 57 inserted 58-61]-----
  &gt; #if defined(M_I86LM)
  &gt; static      struct SREGS    sreg;
  &gt; #endif
  &gt; 
  -----[end of inserted lines]-----
    DIR *
    opendir(name)
          char  *name;
    {
          struct        stat            statb;
  ********************************
    void
    closedir(dirp)
          DIR   *dirp;
    {
          free_dircontents(dirp-&gt;dd_contents);
  -----[108 changed to 112]-----
  &lt;     free((void *) dirp);
  ----------
  &gt;     free((char *) dirp);
  -----[end of changed lines]-----
    }
</PRE>
<P>
<PRE>    struct direct       *
    readdir(dirp)
          DIR   *dirp;
</PRE>
<P>
The output is similar to that of <CODE>cleardiff -serial</CODE> except that lines of context are included. The default is to print 5 lines
of surrounding context before and after each insert/change/delete. There is
a <STRONG>-before</STRONG>
and a <STRONG>-after</STRONG> option to change the number of lines of context. There is also a <STRONG>-unlimited</STRONG> option if you want <EM>all</EM> lines of context to be included. You can use the <STRONG>-linenumbers</STRONG> option to include lines numbers for each file. You can also use the <STRONG>-noheaders</STRONG> option if you dont like seeing the comments in the square brackets with the
dashed lines. Options may be abbreviated to a unique prefix. For example:

<P>
<PRE>  $ cdiff -nohead -bef 1 -aft 1 -line dir.c.orig dir.c
</PRE>
<P>
<PRE>  ********************************
  &lt;&lt;&lt; file 1: dir.c.orig
  &gt;&gt;&gt; file 2: dir.c
  ********************************
      57   57 
  &gt;        58  #if defined(M_I86LM)
  &gt;        59  static      struct SREGS    sreg;
  &gt;        60  #endif
  &gt;        61  
      58   62  DIR *
  ********************************
     107  111      free_dircontents(dirp-&gt;dd_contents);
  &lt;  108           free((void *) dirp);
  &gt;       112      free((char *) dirp);
     109  113  }
  ********************************
     141  145      dirp-&gt;dd_cp = dp;
  &lt;  142       
  &lt;  143               return  1;
     144  146  }
</PRE>
<P>
<PRE>  $ cdiff -nohead -bef 1 -aft 1 -line -refline dir.c.orig dir.c
</PRE>
<P>
You can add reference line-numbers as well, using the <STRONG>-reflinenumbers</STRONG>
to give a unique number to each output line:

<P>
<PRE>  ********************************
  &lt;&lt;&lt; file 1: dir.c.orig
  &gt;&gt;&gt; file 2: dir.c
  ********************************
  1      57   57 
  2  &gt;        58  #if defined(M_I86LM)
  3  &gt;        59  static      struct SREGS    sreg;
  4  &gt;        60  #endif
  5  &gt;        61  
  6  &gt;   58   62  DIR *
  ********************************
  7     107  111      free_dircontents(dirp-&gt;dd_contents);
  8  &lt;  108           free((void *) dirp);
  9  &gt;       112      free((char *) dirp);
  10    109  113  }
  ********************************
  11    141  145      dirp-&gt;dd_cp = dp;
  12 &lt;  142       
  13 &lt;  143               return  1;
  14    144  146  }
</PRE>
<P>
There is also a <STRONG>-fmt</STRONG> option which can take several different keyword settings to change the
output format:

<P>
<PRE>  $ cdiff -fmt del=DELETE -fmt ins=INSERT -fmt sep='|'  \
          -noheaders -bef 2 -aft 2 -line  \
          dir.c.orig dir.c
</PRE>
<P>
<PRE>  ********************************
  &lt;&lt;&lt; file 1: dir.c.orig
  &gt;&gt;&gt; file 2: dir.c
  ********************************
           56   56 | static       union REGS      reg, nreg;
           57   57 | 
  INSERT        58 | #if  defined(M_I86LM)
  INSERT        59 | static       struct SREGS    sreg;
  INSERT        60 | #endif
  INSERT        61 | 
           58   62 | DIR  *
           59   63 | opendir(name)
  ********************************
          106  110 | {
          107  111 |      free_dircontents(dirp-&gt;dd_contents);
  DELETE  108      |      free((void *) dirp);
  INSERT       112 |      free((char *) dirp);
          109  113 | }
          110  114 | 
  ********************************
          140  144 |      dirp-&gt;dd_loc = off - (i + 1);
          141  145 |      dirp-&gt;dd_cp = dp;
  DELETE  142      | 
  DELETE  143      |         return  1;
          144  146 | }
          145  147 | 
</PRE>
<P>
Hopefully, this ``tutorial'' should have provided you with a good set of
cookbook examples for using <STRONG>cdiff</STRONG>. if you ever want to see this manual page, you need only invoke <STRONG>cdiff</STRONG> using the <STRONG>-help</STRONG> option:

<P>
<PRE>  $ cdiff -help
</PRE>
<P>
<HR>
<H1><A NAME="SEE_ALSO">SEE ALSO</A></H1>
<P>
<EM>sclc</EM> -- <STRONG>sclc</STRONG> uses <STRONG>cdiff</STRONG> to compare versions of files when counting lines of source code

<P>
<HR>
<H1><A NAME="AUTHOR">AUTHOR</A></H1>
<P>
Brad Appleton  &lt;<A HREF="mailto:brad@bradapp.net<gt>">brad@bradapp.net<gt></A>

<P>
<HR>
<ADDRESS>
Back to <A HREF=sclc-cdiff.html>sclc &amp; cdiff download page</A>
</ADDRESS>

</BODY>

</HTML>
